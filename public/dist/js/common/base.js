define(function(t,e,i){var a,n,o,r,s=t("jquery"),h=document.getElementById("waveCanvas"),f=h.getContext("2d"),l=s(h).parent(),c=function(){n=l.height(),a=l.width(),h.setAttribute("width",Math.round(a*window.devicePixelRatio)),h.setAttribute("height",Math.round(n*window.devicePixelRatio)),h.style.width=a+"px",h.style.height=n+"px",o=h.height-h.height/2.7,r=h.height/7.5,f.strokeStyle="#fff",f.fillStyle="#fff",f.clearRect(0,0,a,n)};i.exports={wave:function(t){function e(){this.amp=10+12*Math.random(),this.freq=.0044,this.phase=2+2*Math.random(),this.offset=2+4*Math.random(),a/h<680&&(this.amp=2+6*Math.random(),this.freq=.018,this.phase=1+2*Math.random(),this.offset=1+2*Math.random()),this.point=function(t){return o-w()+this.offset+this.amp*Math.sin(this.freq*t+this.phase+d*u)}}function i(){f.clearRect(0,0,a,n),f.beginPath();for(var t=0;t<a+2;t++)f.lineTo(t,(p.point(t)*m+p.point(t))*v);u=(u-1)%l,f.lineTo(a,n),f.lineTo(0,n),f.closePath(),f.stroke(),f.fill()}c(),s(window).resize(function(){c()});var h=window.devicePixelRatio?window.devicePixelRatio:1,l=340,d=2*Math.PI/l,u=10,v=.41,m=2.5,w=function(){var t=new Date;return r/2*Math.abs(t.getSeconds()+t.getMilliseconds()/1e3-30)/30},p=new e,g=60,M=1e3/g>>0;setInterval(i,M)},navigation:function(){s.ajax({url:"/api/getNavInfo",dataType:"json",success:function(t){var e="",i=t;for(var a in t){var n=t[a];e+='<li><a href="/u/'+n.name+"/"+n.time.day+"/"+n.title+'">'+n.title+"</a>"}for(var o,r=i.length,a=0;a<r;a++)for(var h=new Date(i[a].lastTime),f=0;f<r;f++){var l=new Date(i[f].lastTime);h>l&&(o=i[f],i[f]=i[a],i[a]=o)}var c="";for(var a in i){if(a>2)break;var n=i[a];c+='<li class="recentcomments"><a href="/u/'+n.name+"/"+n.time.day+"/"+n.title+'">'+n.title+"</a>"}s("#recent-posts-2").find("ul").html(e),s("#recentcomments").html(c)}}),s(".nav-switch").on("click",function(){s("body").toggleClass("isOpen"),c()})}}});